# 一发十连-实现湖南国补破解
---
**免责声明：本人为在校学生，无法参加国补，因此本人未使用此仓库的代码进行任何国补抢券活动，本人的MacBook已找外省朋友代购，未对湖南国补造成任何影响。此仓库仅限学生间交流和学习，禁止生产环境或实践使用，若您使用此仓库提供的方法/代码进行非法活动，纯属您本人行为，与本仓库以及作者无关，带来的相关违法后果由您本人自行承担。**
---
## 1.基本思路

根据相关要求，领券时必须使用云闪付。通过云闪付小程序进入国补领券页面进行领取。

把网络关闭后弹出webview的加载失败界面，可以得知，小程序使用的是webview。这边通过webview来进行代码注入

## 2.webview Hook

要通过webview来修改js，需要进入devtools。正常情况不会打开devtools，因此需要使用lsposed模块来强制打开（需要准备一台已经root的手机最好，如果你有其他方法那更好）。模块相关信息在此不提供，大佬可通过自己的渠道自行查找。

注入模块后，即可强行打开控制台，使用adb连接上电脑后，电脑端打开devtools，可发现手机端云闪付的小程序页面，点击inspect进入控制台页面。

## 3.通过资源面板层级修改

通过资源面板，可以得知主要代码文件有

 - index.html
 - index.(hashcode).js
 - configPage.(hashcode).js

其中hashcode会在每次有代码更新时被替换，建议根据当时自己的版本来确定文件名。

在实践中，资源面板直接替换configPage资源发现无效，因此从index.html入手，将index.js资源替换为自己的地址；

再将index.js里100行附近的ChunkLoad代码里的configPage.js URL获取代码强制返回为你自己的地址（可参考仓库里的示例代码）

## 4.修改configPage实现相关功能

抢券的主要逻辑代码在configPage。找到handleMobileClick函数，写一个循环，循环执行10次，实现一发十连，可以套一个函数。receiveClick是主要接受按键信息的函数，把所有uniapp的提示窗口换成console.log有助于页面不被加载框挡住。然后自行清理掉影响影响同时加载的代码，例如Loading锁，receiveClick有!this.loading判断，不能同时加载，把这个改成true就避免掉加载判断，其他地方也同理。

## 5.LoadingTime强制加载时间修改

在原版代码中，平台为了限制普通人和科技竞争，添加了加载时间限制，也就是必须等2e3ms的加载框，但其实在按下的那一刻就已经有服务器响应了，只不过一定要在那卡你时间。

在index.js里修改LoadingTime，把2e3改为0即可消除加载时间。2e3是科学计数法表示，换算成数字为2000，也就是2000ms=2s

## 
